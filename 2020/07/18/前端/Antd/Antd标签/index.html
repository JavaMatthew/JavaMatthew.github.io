<!DOCTYPE html>
<html lang="zh-CN">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="description" content="仅限学习参考，有兴趣可以互相交流">
  <meta name="author" content="张议">
  <meta name="keywords" content="张议,Matthew,Java,java,spring,SpringBoot,zhangyi">
  <title>Antd标签 ~ 人生展馆</title>

  <link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"  >
<link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css"  >
<link rel="stylesheet" href="/lib/mdbootstrap/css/mdb.min.css"  >
<link rel="stylesheet" href="/lib/github-markdown/github-markdown.min.css"  >

<link rel="stylesheet" href="//at.alicdn.com/t/font_1067060_qzomjdt8bmp.css">



  <link rel="stylesheet" href="/lib/prettify/tomorrow-night-eighties.min.css"  >

<link rel="stylesheet" href="/css/main.css"  >


  <link rel="stylesheet" href="/lib/fancybox/jquery.fancybox.min.css"  >


<meta name="generator" content="Hexo 4.2.1"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>人生展馆</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/">主页</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/archives/">归档</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/categories/">分类</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/tags/">标签</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/about/">资料</a>
          </li>
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>


</nav>

    <div class="view intro-2" id="background"
         style="background: url('/img/index.jpg')no-repeat center center;
           background-size: cover;
           background-attachment: fixed;">
      <div class="full-bg-img">
        <div class="mask rgba-black-light flex-center">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              <br>
              
                <p class="mt-3">
                  <i class="fas fa-calendar-alt" aria-hidden="true"></i>&nbsp;
                  星期六, 七月 18日 2020, 5:02 下午
                </p>
              

              <p>
                
                  
                  &nbsp;<i class="far fa-chart-bar"></i>
                  <span class="post-count">
                    4.7k 字
                  </span>&nbsp;
                

                
                  
                  &nbsp;<i class="far fa-clock"></i>
                  <span class="post-count">
                      27 分钟
                  </span>&nbsp;
                

                
                  <!-- 不蒜子统计文章PV -->
                  
                  &nbsp;<i class="far fa-eye" aria-hidden="true"></i>&nbsp;
                  <span id="busuanzi_container_page_pv">
                    <span id="busuanzi_value_page_pv"></span> 次
                  </span>&nbsp;
                
              </p>
            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="py-5 z-depth-3" id="board">
        <div class="post-content mx-auto" id="post">
          <div class="markdown-body">
            <h2 id="制作的页面代码"><a href="#制作的页面代码" class="headerlink" title="制作的页面代码"></a>制作的页面代码</h2><p>里面有时间，下拉框（可清除），表单分页（子目录）</p>
<pre><code class="js">/*
 * @Description: 奖池分组
 * @version: 1.0.0
 * @Company: sdbean
 * @Author: zhangyi
 * @Date: 2020-7-18
 */

import {IawardGroup, Igachats} from &#39;./models/gacha&#39;;
import React, {Component} from &#39;react&#39;;
import * as styles from &#39;./CoinWeightManager.less&#39;;
import PageHeaderWrapper from &#39;@/components/PageHeaderWrapper&#39;;
import {connect} from &#39;dva&#39;;
import {ILogin} from &#39;@/models/login&#39;;
import EditorAwardGroup from &#39;./EditorAwardGroup&#39;;
import {PlusOutlined} from &#39;@ant-design/icons&#39;;
import { getGachaSeasonGroup, getGachaSeasonSelectName} from &#39;@/utils/mallTool&#39;;
import {
  Button,
  Spin,
  Row,
  Card,
  Col,
  Select,
  Table,
  message
} from &#39;antd&#39;;
import {ColumnProps} from &quot;antd/lib/table&quot;;

export const PAGESIZE = 8;

@connect(({loading, login, gacha}: { loading: IdvaLoading; login: ILogin; gacha: Igachats }) =&gt; ({
  uid: login.uid,
  isLoading: loading.models.getSeasonList,
  seasonList: gacha.seasonList,
  coinList: gacha.coinList,
  awardList: gacha.awardList,
  modelType: gacha.modelType,
  coinModelType: gacha.coinModelType,
  currentWeightSeasonId: gacha.currentWeightSeasonId,
  simpleSeasonList: gacha.simpleSeasonList,
  simpleSeasonGroupList: gacha.simpleSeasonGroupList,
  currentGroupSeasonId: gacha.currentGroupSeasonId,
  currentGroupId: gacha.currentGroupId,
  groupList: gacha.groupList,
  groupId: gacha.groupId,
}))

class AwardGroup extends Component&lt;Igachats&gt; {

  constructor(props) {
    super(props);
    this.state = {
      visible: false,
      currentPage: 1,
    };
  }

  componentDidMount() {
    const {dispatch} = this.props;

    dispatch({
      type: &#39;gacha/getSimpleSeasonList&#39;,
    });
    dispatch({
      type: &#39;gacha/getSimpleSeasonCoinList&#39;,
    });
    dispatch({
      type: &#39;gacha/getGachaSeasonAward&#39;,
    });
    dispatch({
      type: &#39;gacha/getGroupList&#39;,
      payload: {gacha_season_id: this.props.currentWeightSeasonId, gacha_group_id: this.props.groupId}
    });
  }

  render() {
    const {isLoading} = this.props;

    return (
      &lt;PageHeaderWrapper title=&quot;奖池分组&quot; content={this.renderHeader()}&gt;
        &lt;Spin spinning={!!this.props.isLoading}&gt;
          {this.props.currentGroupSeasonId &gt; 0 &amp;&amp; &lt;EditorAwardGroup/&gt;}
        &lt;/Spin&gt;
        &lt;div className={styles.avswitch}&gt;
          &lt;Row&gt;
            &lt;Col span={2}&gt;
              &lt;Button type=&quot;primary&quot; icon={&lt;PlusOutlined/&gt;} size=&quot;large&quot; onClick={this.onClickCreate}&gt;添加&lt;/Button&gt;
            &lt;/Col&gt;
            &lt;Col span={2}&gt;
              &lt;Button type=&quot;primary&quot; icon={&lt;PlusOutlined/&gt;} size=&quot;large&quot; onClick={this.onClickUpdate}&gt;更新&lt;/Button&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;
        &lt;/div&gt;
        &lt;Card&gt;
          &lt;Table
            //  scroll={{ x: 'calc(1800px + 50%)', y: 720 }}
            // scroll={{ x: 2000, y: 720 }}
            className={styles.tableClass}
            rowClassName={this.rowClassName}
            columns={this.columns}
            dataSource={this.props.groupList}
            loading={!!isLoading}
            bordered={true}
            rowKey={(record, index) =&gt; index.toString()}
            pagination={{
              pageSize: PAGESIZE,
              current: this.state.currentPage,
              total: this.props.groupList ? this.props.groupList.length : 0,
              onChange: this.changePage,
            }}
          /&gt;
        &lt;/Card&gt;
      &lt;/PageHeaderWrapper&gt;
    );
  }

  rowClassName = (record, index) =&gt; {
    return (record.current === true ? styles.current : &#39;&#39;)
  }

  changePage = (page) =&gt; {
    this.setState({currentPage: page});
  };

  //表格列规则
  columns: Array&lt;ColumnProps&lt;IawardGroup&gt;&gt; = [
    {
      title: &#39;ID&#39;,
      dataIndex: &#39;id&#39;,
      key: &#39;id&#39;,
      align: &#39;center&#39;,
    },
    {
      title: &#39;季度 ID&#39;,
      dataIndex: &#39;gacha_season_id&#39;,
      key: &#39;gacha_season_id&#39;,
      align: &#39;center&#39;,
    },
    {
      title: &#39;分组 ID&#39;,
      dataIndex: &#39;gacha_group_id&#39;,
      key: &#39;gacha_group_id&#39;,
      align: &#39;center&#39;,
    },
    {
      title: &#39;名称&#39;,
      dataIndex: &#39;item_name&#39;,
      key: &#39;item_name&#39;,
      align: &#39;center&#39;,
    },
    {
      title: &#39;操作&#39;,
      key: &#39;action&#39;,
      align: &#39;center&#39;,
      render: (value, row, index) =&gt; {
        return (
          &lt;div className={styles.cellCenter}&gt;
            &lt;Button type=&quot;primary&quot; onClick={() =&gt; this.onClickDelete(row)}&gt;删除&lt;/Button&gt;
          &lt;/div&gt;
        );
      },
    },
    {
      title: &#39;中文备注&#39;,
      dataIndex: &#39;cn_remark&#39;,
      key: &#39;cn_remark&#39;,
      align: &#39;center&#39;,
    },
    {
      title: &#39;分类名称&#39;,
      dataIndex: &#39;type_name&#39;,
      key: &#39;type_name&#39;,
      align: &#39;center&#39;,
    },
    {
      title: &#39;物品等级&#39;,
      dataIndex: &#39;item_level&#39;,
      key: &#39;item_level&#39;,
      align: &#39;center&#39;,
      render: (value) =&gt; {
        switch (value) {
          case 0:
            return &#39;无&#39;;
          case 1:
            return &#39;C&#39;;
          case 2:
            return &#39;R&#39;;
          case 3:
            return &#39;SR&#39;;
          case 4:
            return &#39;SSR&#39;;
          case 5:
            return &#39;UR&#39;;
        }
      },
    },
  ];

  //渲染头部
  renderHeader() {
    return (
      &lt;div className={styles.avframeheader}&gt;

        &lt;div className={styles.title}&gt;季度选择：&lt;/div&gt;
        &lt;Select style={{width: 280}}
                className={styles.actionItem}
                placeholder=&quot;请选择要查看的季度&quot;
                onChange={this.onChangeSelect}
                defaultValue={getGachaSeasonSelectName(this.props.currentWeightSeasonId, this.props.simpleSeasonList)}
        &gt;
          {this.props.simpleSeasonList.map((item, index) =&gt; {
            return (
              &lt;Option key={index.toString()} value={this.props.simpleSeasonList[index].gacha_season_id}&gt;
                {&quot;季度ID: &quot; + this.props.simpleSeasonList[index].gacha_season_id + &quot; 名称: &quot; + this.props.simpleSeasonList[index].name}
              &lt;/Option&gt;
            );
          })}
        &lt;/Select&gt;
        &lt;div className={styles.title}&gt;分组选择：&lt;/div&gt;
        &lt;Select style={{width: 280}}
                allowClear
                className={styles.actionItem}
                placeholder=&quot;请选择要查看的分组&quot;
                onChange={this.onChangeGroupSelect}
                defaultValue={getGachaSeasonGroup(this.props.currentWeightSeasonId, this.props.simpleSeasonGroupList)}
        &gt;
          {
            this.props.simpleSeasonGroupList.map((item, index) =&gt; {
            return (
              &lt;Option key={index.toString()} value={this.props.simpleSeasonGroupList[index].gacha_season_group_id}&gt;
                {&quot;分组ID: &quot; + this.props.simpleSeasonGroupList[index].gacha_season_group_id + &quot; 名称: &quot; + this.props.simpleSeasonGroupList[index].name}
              &lt;/Option&gt;
            );
          })}
        &lt;/Select&gt;
      &lt;/div&gt;
    );
  }

  //选择框
  onChangeSelect = value =&gt; {
    const {dispatch} = this.props;

    this.changePage(1);
    dispatch({
      type: &#39;gacha/setCurrentWeight&#39;,
      payload: null
    });
    dispatch({
      type: &#39;gacha/getGroupList&#39;,
      payload: {gacha_season_id: value}
    });
    dispatch({
      type: &#39;gacha/setCurrentWeightSeasonId&#39;,
      payload: value
    });
    dispatch({
      type: &#39;gacha/getSimpleSeasonGroupList&#39;,
      payload: {gacha_season_id: value}
    });
  };

  onChangeGroupSelect = value =&gt; {
    const {dispatch} = this.props;
    this.changePage(1);
    dispatch({
      type: &#39;gacha/getGroupList&#39;,
      payload: {gacha_season_id: this.props.currentWeightSeasonId, gacha_group_id: value}
    });
    dispatch({
      type: &#39;gacha/setCurrentGroupId&#39;,
      payload: value,
    })
  }

  //点击编辑
  onClickDelete = (row: any) =&gt; {
    if (this.props.currentWeightSeasonId &lt;= 0) {
      message.error(&quot;请先选择季度&quot;);
      return;
    }

    this.props.dispatch({
      type: &#39;gacha/deleteSeasonGroupAward&#39;,
      payload: row
    });

    message.success(&quot;删除成功&quot;);
    this.props.dispatch({
      type: &#39;gacha/getGroupList&#39;,
      payload: {gacha_season_id: this.props.currentWeightSeasonId, gacha_group_id: row.gacha_group_id}
    });
  };

  onClickCreate = () =&gt; {
    if (this.props.currentWeightSeasonId &lt;= 0) {
      message.error(&quot;请先选择季度&quot;);
      return;
    }
    this.props.dispatch({
      type: &#39;gacha/getCurrentGroupSeasonId&#39;,
      payload: {}
    });
    this.props.dispatch({
      type: &#39;gacha/getGachaAwardPoolList&#39;,
      payload: {gacha_season_id: this.props.currentWeightSeasonId}
    });
  };

  onClickUpdate = () =&gt; {
    if (this.props.currentWeightSeasonId &lt;= 0) {
      message.error(&quot;请先选择季度&quot;);
      return;
    }
    if (this.props.currentGroupId &lt;= 0){
      message.error(&quot;请先选择分组&quot;);
      return;
    }

    this.props.dispatch({
      type: &#39;gacha/setCurrentGroupSeasonId&#39;,
      payload: [{id:this.props.currentGroupId}]
    });

    this.props.dispatch({
      type: &#39;gacha/getGachaAwardPoolList&#39;,
      payload: {gacha_season_id: this.props.currentWeightSeasonId}
    });

    this.props.dispatch({
      type: &#39;gacha/getSelectedRowKeys&#39;,
      payload: {gacha_season_id: this.props.currentWeightSeasonId,gacha_group_id: this.props.currentGroupId}
    });
  };
}

export default AwardGroup;
</code></pre>
<pre><code class="js">/*
 * @Description: 订单管理
 * @version: 1.0.0
 * @Company: sdbean
 * @Author: zhangyi
 * @Date: 2020-7-18
 */

import {IgachaOrder, Igachats} from &#39;./models/gacha&#39;;
import React, {Component} from &#39;react&#39;;
import * as styles from &#39;./CoinWeightManager.less&#39;;
import PageHeaderWrapper from &#39;@/components/PageHeaderWrapper&#39;;
import {connect} from &#39;dva&#39;;
import {ILogin} from &#39;@/models/login&#39;;
import {
  Row,
  Card,
  Col,
  Select,
  DatePicker,
  Table,
} from &#39;antd&#39;;
import moment from &quot;moment&quot;;
import {ColumnProps} from &quot;antd/es/table&quot;;
import {getGachaSeasonSelectName} from &quot;@/utils/mallTool&quot;;

export const PAGESIZE = 8;

@connect(({loading, login, gacha}: { loading: IdvaLoading; login: ILogin; gacha: Igachats }) =&gt; ({
  uid: login.uid,
  isLoading: loading.models.getSeasonList,
  orderList: gacha.orderList,
  currentWeightSeasonId: gacha.currentWeightSeasonId,
  simpleSeasonList: gacha.simpleSeasonList,
}))

class OrderManage extends Component&lt;Igachats&gt; {

  constructor(props) {
    super(props);
    this.state = {
      startTime: 0,
      endTime: 0,
      orderState: 2,
      seasonId: 0,
      currentPage: 1,
    };
  }

  componentDidMount() {
    const {dispatch} = this.props;

    dispatch({
      type: &#39;gacha/getOrderList&#39;,
      payload: {start: 0, offset: PAGESIZE}
    });
    dispatch({
      type: &#39;gacha/getSimpleSeasonList&#39;,
    });
  }

  render() {
    const {isLoading} = this.props;

    return (
      &lt;PageHeaderWrapper title=&quot;订单管理&quot; content={this.renderHeader()}&gt;
        &lt;Card&gt;
          &lt;Table
            scroll={{x: 'calc(1800px + 50%)', y: 450}}
            className={styles.tableClass}
            rowClassName={this.rowClassName}
            columns={this.columns}
            dataSource={this.props.orderList.data}
            loading={!!isLoading}
            bordered={true}
            rowKey={(record, index) =&gt; index.toString()}
            pagination={{
              pageSize: this.props.orderList.pageSize,
              current: this.state.currentPage,
              total: this.props.orderList.count,
              onChange: this.changePage,
            }}
          /&gt;
        &lt;/Card&gt;
      &lt;/PageHeaderWrapper&gt;
    );
  }

  renderHeader() {
    return (
      &lt;Row style={{marginBottom: 15}}&gt;
        &lt;Col span={5}&gt;
          季度选择：
          &lt;Select style={{width: 280}}
                  className={styles.actionItem}
                  placeholder=&quot;请选择要查看的季度&quot;
                  allowClear
                  onChange={this.onChangeSelect}
                  defaultValue={getGachaSeasonSelectName(this.props.currentWeightSeasonId, this.props.simpleSeasonList)}
          &gt;
            {this.props.simpleSeasonList.map((item, index) =&gt; {
              return (
                &lt;Option key={index.toString()} value={this.props.simpleSeasonList[index].gacha_season_id}&gt;
                  {&quot;季度ID: &quot; + this.props.simpleSeasonList[index].gacha_season_id + &quot; 名称: &quot; + this.props.simpleSeasonList[index].name}
                &lt;/Option&gt;
              );
            })}
          &lt;/Select&gt;
        &lt;/Col&gt;
        &lt;Col span={5}&gt;
          订单状态:
          &lt;Select style={{width: 280}}
                  allowClear
                  onChange={this.onChangeOrderState}&gt;
            &lt;Option value=&quot;0&quot;&gt;已发放&lt;/Option&gt;
            &lt;Option value=&quot;1&quot;&gt;未发放&lt;/Option&gt;
          &lt;/Select&gt;
        &lt;/Col&gt;
        &lt;Col span={5}&gt;
          创建时间: &lt;DatePicker.RangePicker
          allowClear
          onChange={this.onTimeChange}
          showTime={{
            hideDisabledOptions: true,
            defaultValue: [moment('00:00:00', 'HH:mm:ss'), moment('11:59:59', 'HH:mm:ss')],
          }}
          style={{width: '300px'}}/&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;
    );
  }

  rowClassName = (record) =&gt; {
    return (record.current === true ? styles.current : &#39;&#39;)
  }

  changePage = (page) =&gt; {
    this.props.dispatch({
      type: &#39;gacha/getOrderList&#39;,
      payload: {
        start: (page - 1) * PAGESIZE,
        offset: PAGESIZE,
        gacha_season_id: this.state.seasonId,
        startTime: this.state.startTime,
        endTime: this.state.endTime,
        orderState: this.state.orderState,
      }
    });
    this.setState({currentPage: page});
  };

  //表格列规则
  columns: Array&lt;ColumnProps&lt;IgachaOrder&gt;&gt; = [
    {
      title: &#39;ID&#39;,
      dataIndex: &#39;id&#39;,
      key: &#39;id&#39;,
      align: &#39;center&#39;,
      render: (value, row, index) =&gt; {
        return this.renderRow(value, row, index);
      },
    },
    {
      title: &#39;订单号&#39;,
      dataIndex: &#39;order_no&#39;,
      key: &#39;order_no&#39;,
      align: &#39;center&#39;,
      width: 150,
      render: (value, row, index) =&gt; {
        return this.renderRow(value, row, index);
      },
    },
    {
      title: &#39;订单状态&#39;,
      dataIndex: &#39;status&#39;,
      key: &#39;status&#39;,
      align: &#39;center&#39;,
      render: (value, row, index) =&gt; {
        if (row.rowSpan == null) {
          row.rowSpan = 0;
        }
        return {
          children: &lt;div&gt;{value == 0 ? &quot;已发放&quot; : &quot;未发放&quot;}&lt;/div&gt;,
          props: {rowSpan: row.rowSpan},
        };
      },
    },
    {
      title: &#39;创建时间&#39;,
      dataIndex: &#39;create_time&#39;,
      key: &#39;create_time&#39;,
      align: &#39;center&#39;,
      render: (value, row, index) =&gt; {
        if (row.rowSpan == null) {
          row.rowSpan = 0;
        }
        if (!!value) {
          return {
            children: &lt;div&gt;{moment(value).format(&#39;YYYY-MM-DD HH:mm:ss&#39;)}&lt;/div&gt;,
            props: {rowSpan: row.rowSpan},
          };
        } else {
          return {
            children: &lt;div&gt;无&lt;/div&gt;,
            props: {rowSpan: row.rowSpan},
          };
        }
      },
      width: 150,
    },
    {
      title: &#39;消耗货币ID&#39;,
      dataIndex: &#39;coin_id&#39;,
      key: &#39;coin_id&#39;,
      align: &#39;center&#39;,
      render: (value, row, index) =&gt; {
        return this.renderRow(value, row, index);
      },
    },
    {
      title: &#39;消耗货币数量&#39;,
      dataIndex: &#39;coin_num&#39;,
      key: &#39;coin_num&#39;,
      align: &#39;center&#39;,
      render: (value, row, index) =&gt; {
        return this.renderRow(value, row, index);
      },
    },
    {
      title: &#39;消耗货币名称&#39;,
      dataIndex: &#39;coin_name&#39;,
      key: &#39;coin_name&#39;,
      align: &#39;center&#39;,
      render: (value, row, index) =&gt; {
        return this.renderRow(value, row, index);
      },
    },
    {
      title: &#39;抽奖次数&#39;,
      dataIndex: &#39;order_number&#39;,
      key: &#39;order_number&#39;,
      align: &#39;center&#39;,
      render: (value, row, index) =&gt; {
        return this.renderRow(value, row, index);
      },
    },
    {
      title: &#39;用户Id&#39;,
      dataIndex: &#39;user_id&#39;,
      key: &#39;user_id&#39;,
      align: &#39;center&#39;,
      render: (value, row, index) =&gt; {
        return this.renderRow(value, row, index);
      },
    },
    {
      title: &#39;季度Id&#39;,
      dataIndex: &#39;gacha_season_id&#39;,
      key: &#39;gacha_season_id&#39;,
      align: &#39;center&#39;,
      render: (value, row, index) =&gt; {
        return this.renderRow(value, row, index);
      },
    },
    {
      title: &#39;道具配置&#39;,
      align: &#39;center&#39;,
      children: [
        {
          title: &#39;gacha赛季奖励Id&#39;,
          dataIndex: &#39;gacha_season_award_id&#39;,
          key: &#39;gacha_season_award_id&#39;,
          align: &#39;center&#39;,
        },
        {
          title: &#39;道具DicId&#39;,
          dataIndex: &#39;item_dic_id&#39;,
          key: &#39;item_dic_id&#39;,
          align: &#39;center&#39;,
        },
        {
          title: &#39;道具Id&#39;,
          dataIndex: &#39;item_id&#39;,
          key: &#39;item_id&#39;,
          align: &#39;center&#39;,
        },
        {
          title: &#39;道具名称&#39;,
          dataIndex: &#39;item_name&#39;,
          key: &#39;item_name&#39;,
          align: &#39;center&#39;,
        },
        {
          title: &#39;中文备注&#39;,
          dataIndex: &#39;cn_remark&#39;,
          key: &#39;cn_remark&#39;,
          align: &#39;center&#39;,
        },
        {
          title: &#39;道具属性&#39;,
          dataIndex: &#39;property_aging&#39;,
          key: &#39;property_aging&#39;,
          align: &#39;center&#39;,
          render: (value) =&gt; {
            return value == 0 ? &#39;永久类&#39; : &#39;时效类&#39;;
          },
        },
        {
          title: &#39;道具数量&#39;,
          dataIndex: &#39;num&#39;,
          key: &#39;num&#39;,
          align: &#39;center&#39;,
        },

      ]
    },
  ];

  renderRow = (value, row, index) =&gt; {
    if (row.rowSpan == null) {
      row.rowSpan = 0;
    }
    return {
      children: value,
      props: {rowSpan: row.rowSpan},
    };
  };

  onChangeOrderState = value =&gt; {
    this.props.dispatch({
      type: &#39;gacha/getOrderList&#39;,
      payload: {
        start: 0,
        offset: PAGESIZE,
        gacha_season_id: this.state.seasonId,
        startTime: this.state.startTime,
        endTime: this.state.endTime,
        orderState: value,
      }
    });
    this.setState({orderState: value})
  }

  onTimeChange = (time, str) =&gt; {

    this.props.dispatch({
      type: &#39;gacha/getOrderList&#39;,
      payload: {
        start: 0,
        offset: PAGESIZE,
        gacha_season_id: this.state.seasonId,
        startTime: new Date(str[0]),
        endTime: new Date(str[1]),
        orderState: this.state.orderState,
      }
    });
    this.setState({startTime: new Date(str[0])});
    this.setState({endTime: new Date(str[1])});
  }

  onChangeSelect = value =&gt; {
    this.props.dispatch({
      type: &#39;gacha/getOrderList&#39;,
      payload: {
        start: 0,
        offset: PAGESIZE,
        gacha_season_id: value,
        startTime: this.state.startTime,
        endTime: this.state.endTime,
        orderState: this.state.orderState,
      }
    });
    this.setState({seasonId: value})
  }
}

export default OrderManage;
</code></pre>
<pre><code class="js">import { array } from &#39;prop-types&#39;;
import {
  getGachaAwardPoolList,
  getCurrentGroupSeasonId,
  createGachaSeasonRule,
  updateGachaSeasonRule,
  getGachaSeasonAwardGroup,
  getSimpleSeasonRuleGroupList,
  getSimpleSeasonGroupList,
  getSeasonRuleList,
  gachaRefreshSeasonAwardNum,
  createGachaSeasonAward,
  updateGachaSeasonAward,
  createGachaSeasonAwardCoinWeight,
  updateGachaSeasonAwardCoinWeight,
  getSimpleSeasonList,
  getSimpleSeasonCoinList,
  getGachaSeasonAwardCoinWeight,
  getGachaSeasonAward,
  getItemDicList,
  getItemCateList,
  getGachaAwardPool,
  createGachaAwardPool,
  updateGachaAwardPool,
  getGachaSeasonList,
  updateSeason,
  createSeason,
  getCoinList,
  updateSeasonCoin,
  createSeasonCoin,
  insertGachaSeasonAwardGroup, deleteSeasonGroupAward, getSelectedRowKeys, getOrderList
} from &#39;@/services/gacha&#39;;
import moment from &#39;moment&#39;;
import { message } from &#39;antd&#39;;
import { IitemCate, IitemDic } from &#39;@/dto/mallItem&#39;;

export const isgiveList = [
  &quot;小于n次不掉落(道具保值)&quot;,
  &quot;前n次没有获得的道具,必掉落其中一个(用户保底)&quot;,
  &quot;不可重复掉落(道具保值)&quot;,
  &quot;前n次没有获得的道具,其权重增加(用户保底)&quot;,
  &quot;小于n次权重增增加&quot;,
  &quot;每抽n次没有获得的道具,必掉落其中一个,并重新计算n次(用户保底)&quot;,
  &quot;每抽n次没有获得的道具,其权重增加并重新计算n次(用户保底)&quot;,
  &quot;连抽,某物品不可重复掉落n次(道具保值)&quot;,
];

export const opentypeList = [
  &quot;单抽&quot;,
  &quot;连抽&quot;,
  &quot;全部&quot;
];

export interface Icoin {
  id: number;
  name: number;
}

export interface IsimpleSeason {
  gacha_season_id: number;
  name: number;
}

export interface IsimpleSeasonGroup {
  gacha_season_group_id: number;
  name: number
}

export interface IsimpleSeasonCoin {
  gacha_season_id: number;
  coin_id: number;
  name: number;
}

export interface IgachaSeason {
  id: number;
  name: string;
  starttime: string;
  endtime: string;
  first_per_free: number;
  bg_url: string;
  multi: number;
  pre_free_time: number;
  multi_free_time: number;
  first_multi_free: number;
  seasonCoinId: number;
  num: number;
  coin: number;
  coin_id: number;
  coinName: string;

  rowSpan: number;
  current: boolean;
}

export interface Irule {
  id: number;
  gacha_season_give_id: number;
  gacha_season_id: number;
  isgive: number;
  weight: number;
  freq: number;
  gacha_group_id: number;
  open_type: number;
  coin_id: number;
  group_name: string;
  coin_name: string;
}

export interface IawardPool {
  id: number;
  item_name: string;
  item_dic_id: number;
  item_id: number;
  remark: string;
  cate_id: number;
  item_pic: string;
  item_level: number;
  type_name: string;
  cn_remark: string;
  gacha_season_award_id: number;
  gacha_award_pool_id: number;
  gacha_season_id: number;
  award_level: number;
  num: number;
  valid_num: number;
  per_num: number;
  min_num: number;
  max_num: number;
  isshow: number;
  ischange: number;
  ischange_coin_id: number;
  ischange_coin_num: number;
  coin_name: string;
  delsign: number;
  gacha_season_award_coin_weight_id: number;
  weight: number;
  coin_id: number;
}

export interface IawardGroup {
  id: number;
  gacha_season_id: number;
  gacha_group_id: number;
  item_name: number;
  cn_remark: number;
  type_name: number;
  item_level: number; // 道具等级，0:无，1:C，2:R，3:SR，4:SSR，5:UR
}

export interface IgachaSeasonAward{
  id: number;
}

export interface IorderManage{
  count: number;
  pagesize: number;
  data: IgachaOrder[];
}

export interface IgachaOrder{
  id: number; // 订单Id
  order_no: number; // 订单号
  status: number; // 订单状态 0：以发放 1:未发放
  gacha_season_award_id: number;
  gacha_season_id: number;
  create_time: number;
  user_id: number;
  itemm_dic_id: number;
  item_id: number;
  item_name: string;
  cn_remark: string;
  property_aging: number;
  num: number;
  coin_id: number;
  coin_num: number;
  coin_name: string;
  order_number: number;
  rowSpan: number;
}

export interface IgachaAwardPool {
  id: number;
  item_name: number;
  cn_remark: number;
  type_name: number;
  item_level: number; // 道具等级，0:无，1:C，2:R，3:SR，4:SSR，5:UR
}

export interface IseasonManagerProps {
  uid: number;
  isLoading: boolean;
  dispatch: Function;
  seasonList: IgachaSeason[];
  seasonSimpleList: IgachaSeason[];
  coinList: Icoin[];
  itemDicList: IitemDic[];
  itemCateList: IitemCate[];
  modelType: number;
  coinModelType: number;
  imgModelType: number;
  selectId: number;
  ruleList: Irule[];
}

interface Igachats {
  seasonList: IgachaSeason[];
  seasonSimpleList: IgachaSeason[];
  coinList: Icoin[];
  poolList: IawardPool[];
  awardList: IawardPool[];
  weightList: IawardPool[];
  simpleSeasonList: IsimpleSeason[];
  simpleSeasonCoinList: IsimpleSeasonCoin[];
  itemDicList: IitemDic[];
  itemCateList: IitemCate[];
  modelType: number;
  coinModelType: number;
  imgModelType: number;
  selectId: number;
  poolModelType: number;
  awardModelType: number;
  currentWeightSeasonId: number;
  currentWeight: IawardPool;
  ruleList: Irule[];
  currentRule: Irule;
  simpleRuleGroupList: IsimpleSeasonGroup[],
  // 奖池分组数据
  simpleSeasonGroupList: IsimpleSeasonGroup[],
  groupList: IawardGroup[],
  groupId: number;
  currentGroupSeasonId: number;
  currentGroupId: number;
  gachaAwardPoolList: IgachaAwardPool[];
  selectedRowKeys: IgachaSeasonAward[];
  // 订单管理
  orderList: IorderManage[];
}

const init: Igachats = {
  seasonList: [],
  seasonSimpleList: [],
  coinList: [],
  poolList: [],
  awardList: [],
  weightList: [],
  simpleSeasonList: [],
  simpleSeasonCoinList: [],
  simpleSeasonGroupList: [],
  groupList: [],
  selectedRowKeys: [],
  gachaAwardPoolList: [],
  groupId: 0,
  currentGroupId: 0,
  itemDicList: [],
  itemCateList: [],
  modelType: 0,
  coinModelType: 0,
  imgModelType: 0,
  selectId: -1,
  poolModelType: 0,
  awardModelType: 0,
  currentGroupSeasonId: 0,
  currentWeightSeasonId: 0,
  currentWeight: null,
  ruleList: [],
  currentRule: null,
  simpleRuleGroupList: [],
  orderList: [],
}

function compareDate(date1, date2) {
  date1 = new Date(date1);
  date2 = new Date(date2);
  if (date1.getTime() &gt;= date2.getTime()) {
    return true;
  } else {
    return false;
  }
}

export default {
  namespace: &#39;gacha&#39;,

  state: init,

  effects: {

    * getSeasonList(action, { call, put }) {
      const response: IgachaSeason = yield call(getGachaSeasonList);
      //更新基础状态
      yield put({ type: &#39;setSeasonList&#39;, payload: response });
    },

    * updateSeason({ payload }: { payload: IgachaSeason }, { call, put }) {
      const response = yield call(updateSeason, payload);
      //更新成功
      if (response) {
        message.success(&quot;编辑成功&quot;);
        yield put({ type: &#39;setModelType&#39;, payload: 0 });
      } else {
        message.error(&quot;编辑失败，请重试&quot;);
      }
      yield put({ type: &#39;getSeasonList&#39; })
    },

    * createSeason({ payload }: { payload: IgachaSeason }, { call, put }) {
      const response = yield call(createSeason, payload);
      //更新成功
      if (response) {
        message.success(&quot;新建成功&quot;);
        yield put({ type: &#39;setModelType&#39;, payload: 0 });
      } else {
        message.error(&quot;新建失败，请重试&quot;);
      }
      yield put({ type: &#39;getSeasonList&#39; })
    },

    * getCoinList(action, { call, put }) {
      const response: IgachaSeason = yield call(getCoinList);
      //更新基础状态
      yield put({ type: &#39;setCoinList&#39;, payload: response });
    },

    * updateSeasonCoin({ payload }: { payload: IgachaSeason }, { call, put }) {
      const response = yield call(updateSeasonCoin, payload);
      //更新成功
      if (response) {
        message.success(&quot;编辑成功&quot;);
        yield put({ type: &#39;setCoinModelType&#39;, payload: 0 });
      } else {
        message.error(&quot;编辑失败，请重试&quot;);
      }
      yield put({ type: &#39;getSeasonList&#39; })
    },

    * createSeasonCoin({ payload }: { payload: IgachaSeason }, { call, put }) {
      const response = yield call(createSeasonCoin, payload);
      //更新成功
      if (response) {
        message.success(&quot;新建成功&quot;);
        yield put({ type: &#39;setCoinModelType&#39;, payload: 0 });
      } else {
        message.error(&quot;新建失败，请重试&quot;);
      }
      yield put({ type: &#39;getSeasonList&#39; })
    },

    * getGachaAwardPool(action, { call, put }) {
      const response = yield call(getGachaAwardPool);
      //更新基础状态
      yield put({ type: &#39;setPoolList&#39;, payload: response });
    },

    * createGachaAwardPool({ payload }: { payload: IgachaSeason }, { call, put }) {
      const response = yield call(createGachaAwardPool, payload);
      if (response) {
        message.success(&quot;新建成功&quot;);
        yield put({ type: &#39;getGachaAwardPool&#39; });
        yield put({ type: &#39;setPoolModelType&#39;, payload: 0 });
      }
    },

    * updateGachaAwardPool({ payload }: { payload: IgachaSeason }, { call, put }) {
      const response = yield call(updateGachaAwardPool, payload);
      if (response) {
        message.success(&quot;编辑成功&quot;);
        yield put({ type: &#39;getGachaAwardPool&#39; });
        yield put({ type: &#39;setPoolModelType&#39;, payload: 0 });
      }
    },

    * getItemCateList({ payload }: { payload }, { call, put }) {
      const response = yield call(getItemCateList, payload);
      if (response) {
        yield put({ type: &#39;setItemCateList&#39;, payload: response });
      }
    },

    * getItemDicList({ payload }: { payload }, { call, put }) {
      const response = yield call(getItemDicList, payload);
      if (response) {
        yield put({ type: &#39;setItemDicList&#39;, payload: response });
      }
    },

    * getGachaSeasonAward({ payload }: { payload }, { call, put }) {
      const response = yield call(getGachaSeasonAward, payload);
      if (response) {
        yield put({ type: &#39;setAwardList&#39;, payload: response });
      }
    },

    * getGachaSeasonAwardCoinWeight({ payload }: { payload }, { call, put }) {
      const response = yield call(getGachaSeasonAwardCoinWeight, payload);
      if (response) {
        yield put({ type: &#39;setWeightList&#39;, payload: response });
      }
    },

    * getSimpleSeasonList({ payload }: { payload }, { call, put }) {
      const response = yield call(getSimpleSeasonList, payload);
      if (response) {
        yield put({ type: &#39;setSimpleSeasonList&#39;, payload: response });
      }
    },
    * getOrderList({ payload }: { payload }, { call, put }) {
      const response = yield call(getOrderList, payload);
      if (response) {
        yield put({ type: &#39;setOrderList&#39;, payload: response });
      }
    },

    * getSimpleSeasonGroupList({ payload }: { payload }, { call, put }) {
      const response = yield call(getSimpleSeasonGroupList, payload);
      if (response) {
        yield put({ type: &#39;setSimpleSeasonGroupList&#39;, payload: response });
      }
    },

    * deleteSeasonGroupAward({ payload }: { payload }, { call, put }) {
      const response = yield call(deleteSeasonGroupAward, payload);
    },

    * getCurrentGroupSeasonId({ payload }: { payload }, { call, put }) {
      const response = yield call(getCurrentGroupSeasonId);
      if (response) {
        yield put({ type: &#39;setCurrentGroupSeasonId&#39;, payload: response });
      }
    },

    * getGroupList({ payload }: { payload }, { call, put }) {
      const response = yield call(getGachaSeasonAwardGroup, payload);
      if (response) {
        yield put({ type: &#39;setGroupList&#39;, payload: response });
      }
    },

    * insertGachaSeasonAwardGroup({ payload }: { payload }, { call, put }) {
      const response = yield call(insertGachaSeasonAwardGroup, payload);//更新成功
      return response;

    },

    * getGachaAwardPoolList({ payload }: { payload }, { call, put }) {
      const response = yield call(getGachaAwardPoolList,payload);
      if (response) {
        yield put({ type: &#39;setGachaAwardPoolList&#39;, payload: response });
      }
    },

    * getSimpleSeasonCoinList({ payload }: { payload }, { call, put }) {
      const response = yield call(getSimpleSeasonCoinList, payload);
      if (response) {
        yield put({ type: &#39;setSimpleSeasonCoinList&#39;, payload: response });
      }
    },

    * getSelectedRowKeys({ payload }: { payload }, { call, put }) {
      const response = yield call(getSelectedRowKeys, payload);
      if (response) {
        yield put({ type: &#39;setSelectedRowKeys&#39;, payload: response });
      }
    },


    *createGachaSeasonAwardCoinWeight({ payload }: { payload: any }, { call, put }) {
      const response = yield call(createGachaSeasonAwardCoinWeight, payload);
      //更新成功
      if (response) {
        message.success(&quot;创建成功&quot;);
        yield put({ type: &#39;setCurrentWeight&#39;, payload: null });
        yield put({ type: &#39;getGachaSeasonAwardCoinWeight&#39;, payload: { gacha_season_id: payload.gacha_season_id } });
      } else {
        message.error(&quot;创建失败，如已经存在此条目，请编辑&quot;);
      }
    },

    *updateGachaSeasonAwardCoinWeight({ payload }: { payload: any }, { call, put }) {
      const response = yield call(updateGachaSeasonAwardCoinWeight, payload);
      //更新成功
      if (response) {
        message.success(&quot;编辑成功&quot;);
        yield put({ type: &#39;setCurrentWeight&#39;, payload: null });
        yield put({ type: &#39;getGachaSeasonAwardCoinWeight&#39;, payload: { gacha_season_id: payload.gacha_season_id } });
      } else {
        message.error(&quot;编辑失败，请重试&quot;);
      }
    },

    *createGachaSeasonAward({ payload }: { payload: IgachaSeason }, { call, put }) {
      const response = yield call(createGachaSeasonAward, payload);
      if (response) {
        message.success(&quot;新建成功&quot;);
        yield call(gachaRefreshSeasonAwardNum, { seasonId: payload.gacha_season_id });
        yield put({ type: &#39;getGachaSeasonAward&#39;, payload: { gacha_season_id: payload.gacha_season_id } });
        yield put({ type: &#39;setAwardModelType&#39;, payload: 0 });
      }
    },

    *updateGachaSeasonAward({ payload }: { payload: IgachaSeason }, { call, put }) {
      const response = yield call(updateGachaSeasonAward, payload);
      if (response) {
        message.success(&quot;编辑成功&quot;);
        yield call(gachaRefreshSeasonAwardNum, { seasonId: payload.gacha_season_id });
        yield put({ type: &#39;getGachaSeasonAward&#39;, payload: { gacha_season_id: payload.gacha_season_id } });
        yield put({ type: &#39;setAwardModelType&#39;, payload: 0 });
      }
    },

    *getSeasonRuleList({ payload }: { payload }, { call, put }) {
      const response = yield call(getSeasonRuleList, payload);
      if (response) {
        yield put({ type: &#39;setRuleList&#39;, payload: response });
      }
    },

    *getSimpleSeasonRuleGroupList({ payload }: { payload }, { call, put }) {
      const response = yield call(getSimpleSeasonRuleGroupList, payload);
      if (response) {
        yield put({ type: &#39;setSimpleRuleGroupList&#39;, payload: response });
      }
    },

    *createGachaSeasonRule({ payload }: { payload: any }, { call, put }) {
      const response = yield call(createGachaSeasonRule, payload);
      //更新成功
      if (response) {
        message.success(&quot;创建成功&quot;);
        yield put({ type: &#39;setCurrentRule&#39;, payload: null });
        yield put({ type: &#39;getSeasonRuleList&#39;, payload: { gacha_season_id: payload.gacha_season_id } });
      } else {
        message.error(&quot;创建失败，如已经存在此条目，请编辑&quot;);
      }
    },

    *updateGachaSeasonRule({ payload }: { payload: any }, { call, put }) {
      const response = yield call(updateGachaSeasonRule, payload);
      //更新成功
      if (response) {
        message.success(&quot;编辑成功&quot;);
        yield put({ type: &#39;setCurrentRule&#39;, payload: null });
        yield put({ type: &#39;getSeasonRuleList&#39;, payload: { gacha_season_id: payload.gacha_season_id } });
      } else {
        message.error(&quot;编辑失败，请重试&quot;);
      }
    },
  },

  reducers: {

    setSeasonList(state: Igachats, { payload }): Igachats {
      if (!payload) {
        console.info(&quot;payload is null&quot;, payload);
        return state;
      }

      const { array } = payload;
      const now = new Date();
      let rowCount = 0;
      let nowId = 0;
      const simpleArray = [];
      for (let i = array.length - 1; i &gt;= 0; i--) {
        const item: IgachaSeason = array[i];
        item.starttime = moment(item.starttime, &#39;YYYY-MM-DD HH:mm:ss&#39;).utcOffset(960).format(&#39;YYYY-MM-DD HH:mm:ss&#39;);
        item.endtime = moment(item.endtime, &#39;YYYY-MM-DD HH:mm:ss&#39;).utcOffset(960).format(&#39;YYYY-MM-DD HH:mm:ss&#39;);
        if (compareDate(now, item.starttime) &amp;&amp; !compareDate(now, item.endtime)) {
          item.current = true;
        } else {
          item.current = false;
        }

        if (nowId == 0) {
          rowCount++;
          nowId = item.id;
          simpleArray[simpleArray.length] = item;
          if (i == 0) {
            item.rowSpan = rowCount;
          }
        } else {
          if (nowId != item.id) {
            const itemLast: IgachaSeason = array[i + 1];
            itemLast.rowSpan = rowCount;
            rowCount = 1;
            nowId = item.id;
            simpleArray[simpleArray.length] = item;
            if (i == 0) {
              item.rowSpan = rowCount;
            }
          } else {
            if (i == 0) {
              item.rowSpan = rowCount + 1;
            } else {
              rowCount++;
              item.rowSpan = 0;
            }
          }
        }
      }

      const simpleArrayOrder = [];
      for (let i = simpleArray.length - 1; i &gt;= 0; i--) {
        const item: IgachaSeason = simpleArray[i];
        simpleArrayOrder[simpleArrayOrder.length] = item;
      }

      return { ...state, seasonList: array, seasonSimpleList: simpleArrayOrder }
    },

    //更新模态页
    setModelType(state: Igachats, { payload }: { payload: number }): Igachats {
      return { ...state, modelType: payload }
    },

    //更新模态页
    setCoinModelType(state: Igachats, { payload }: { payload: number }): Igachats {
      return { ...state, coinModelType: payload }
    },

    //更新选中的id
    setSelectId(state: Igachats, { payload }: { payload: number }): Igachats {
      return { ...state, selectId: payload }
    },

    setCurrentGroupId(state: Igachats, { payload }: { payload: number }): Igachats {
      return { ...state, currentGroupId: payload }
    },

    setCoinList(state: Igachats, { payload }): Igachats {
      if (!payload) {
        console.info(&quot;payload is null&quot;, payload);
        return state;
      }
      const { array } = payload;
      const free = {
        id: -1,
        name: &quot;免费&quot;,
      }
      array.unshift(free);
      return { ...state, coinList: array }
    },

    setPoolList(state: Igachats, { payload }): Igachats {
      if (!payload) {
        console.info(&quot;payload is null&quot;, payload);
        return state;
      }

      return { ...state, poolList: payload }
    },

    setPoolModelType(state: Igachats, { payload }: { payload }): Igachats {
      return { ...state, poolModelType: payload }
    },

    setItemCateList(state: Igachats, { payload }): Igachats {
      return { ...state, itemCateList: payload }
    },

    setItemDicList(state: Igachats, { payload }: { payload }): Igachats {
      return { ...state, itemDicList: payload }
    },

    setAwardList(state: Igachats, { payload }: { payload }): Igachats {
      return { ...state, awardList: payload }
    },

    setAwardModelType(state: Igachats, { payload }: { payload }): Igachats {
      return { ...state, awardModelType: payload }
    },

    setWeightList(state: Igachats, { payload }: { payload }): Igachats {

      if (state.currentWeightSeasonId != 0) {
        let total = 0;
        let weightList = [];
        for (const item of payload) {
          total += item.weight;
        }
        for (const item of payload) {
          item.weightPer = (item.weight / total * 100).toFixed(2) + &quot;%&quot;;
          weightList.push(item);
        }
        return { ...state, weightList: weightList }
      } else {
        return { ...state, weightList: payload }
      }

    },

    setSimpleSeasonList(state: Igachats, { payload }: { payload }): Igachats {
      return { ...state, simpleSeasonList: payload }
    },

    setSimpleSeasonGroupList(state: Igachats, { payload }: { payload }): Igachats {
      console.log(&quot;payload&quot;,payload)
      return { ...state, simpleSeasonGroupList: payload }
    },

    setGroupList(state: Igachats, { payload }: { payload }): Igachats {
      if (state.currentWeightSeasonId != 0) {
        let total = 0;
        let groupList = [];
        for (const item of payload) {
          total += item.weight;
        }
        for (const item of payload) {
          item.weightPer = (item.weight / total * 100) + &quot;%&quot;;
          groupList.push(item);
        }
        return {...state, groupList: groupList}
      } else {
        return {...state, groupList: payload}
      }
      return { ...state, groupList: payload }
    },

    setGachaAwardPoolList(state: Igachats, {payload}: { payload }): Igachats {
      return {...state, gachaAwardPoolList: payload}
    },

    setSimpleSeasonCoinList(state: Igachats, {payload}: { payload }): Igachats {
      return {...state, simpleSeasonCoinList: payload}
    },

    setCurrentWeightSeasonId(state: Igachats, { payload }: { payload }): Igachats {
      return { ...state, currentWeightSeasonId: payload }
    },

    setCurrentGroupSeasonId(state: Igachats, { payload }: { payload }): Igachats {
      return { ...state, currentGroupSeasonId: payload[0].id }
    },

    setCurrentWeight(state: Igachats, { payload }: { payload }): Igachats {
      return { ...state, currentWeight: payload }
    },

    setRuleList(state: Igachats, { payload }: { payload }): Igachats {
      return { ...state, ruleList: payload }
    },

    setCurrentRule(state: Igachats, { payload }: { payload }): Igachats {
      return { ...state, currentRule: payload }
    },

    setSimpleRuleGroupList(state: Igachats, { payload }: { payload }): Igachats {
      return { ...state, simpleRuleGroupList: payload }
    },

    setSelectedRowKeys(state: Igachats, { payload }: { payload }): Igachats {
      return { ...state, selectedRowKeys: payload }
    },

    setOrderList(state: Igachats, { payload }: { payload }): Igachats {

      const array = payload.data;
      let rowCount = 0;
      let nowId = 0;
      const simpleArray = [];
      for (let i = array.length - 1; i &gt;= 0; i--) {
        const item: IgachaOrder = array[i];
        if (nowId == 0) {
          rowCount++;
          nowId = item.id;
          simpleArray[simpleArray.length] = item;
          if (i == 0) {
            item.rowSpan = rowCount;
          }
        } else {
          if (nowId != item.id) {
            const itemLast: IgachaOrder = array[i + 1];
            itemLast.rowSpan = rowCount;
            rowCount = 1;
            nowId = item.id;
            simpleArray[simpleArray.length] = item;
            if (i == 0) {
              item.rowSpan = rowCount;
            }
          } else {
            if (i == 0) {
              item.rowSpan = rowCount + 1;
            } else {
              rowCount++;
              item.rowSpan = 0;
            }
          }
        }
      }

      const simpleArrayOrder = [];
      for (let i = simpleArray.length - 1; i &gt;= 0; i--) {
        const item: IgachaOrder = simpleArray[i];
        simpleArrayOrder[simpleArrayOrder.length] = item;
      }

      return { ...state, orderList: payload }
    },

  },
};
</code></pre>

            <hr>
          </div>
          <br>
          <div>
            <p>
            
              <span>
                <i class="iconfont icon-inbox"></i>
                
                  <a class="hover-with-bg" href="/categories/%E5%89%8D%E7%AB%AF">前端</a>
                  &nbsp;
                
                  <a class="hover-with-bg" href="/categories/Antd">Antd</a>
                  &nbsp;
                
              </span>&nbsp;&nbsp;
            
            
              <span>
                <i class="iconfont icon-tag"></i>
                
                  <a class="hover-with-bg" href="/tags/%E5%89%8D%E7%AB%AF">前端</a>
                
                  <a class="hover-with-bg" href="/tags/Antd">Antd</a>
                
              </span>
            
            </p>
            
              <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="nofollow noopener noopener">CC BY-SA 3.0协议</a> 。转载请注明出处！</p>
            
          </div>
        </div>
      </div>
    </div>
    <div class="d-none d-lg-block col-lg-2 toc-container">
      
  <div id="toc">
    <p class="h4"><i class="far fa-list-alt"></i>&nbsp;目录</p>
    <div id="tocbot"></div>
  </div>

    </div>
  </div>
</div>

<!-- custom -->


<!-- Comments -->
<div class="col-lg-7 mx-auto nopadding-md">
  <div class="container comments mx-auto" id="comments">
    
      <br><br>
      
      

    
  </div>
</div>

    
  </main>

  
    <a class="z-depth-1" id="scroll-top-button" href="#" role="button">
      <i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  <footer class="mt-5">
  <div class="text-center py-3">
    <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><b>Hexo</b></a>
    <i class="iconfont icon-love"></i>
    <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"> <b>Fluid</b></a>
    <br>

    
  
    <!-- 不蒜子统计PV -->
    
    &nbsp;<span id="busuanzi_container_site_pv">总访问量 
          <span id="busuanzi_value_site_pv"></span> 次</span>&nbsp;
  
  
    <!-- 不蒜子统计UV -->
    
    &nbsp;<span id="busuanzi_container_site_uv">总访客数 
            <span id="busuanzi_value_site_uv"></span> 人</span>&nbsp;
  
  <br>



    

  </div>
</footer>

<!-- SCRIPTS -->
<script src="/lib/jquery/jquery.min.js" ></script>
<script src="/lib/popper/popper.min.js" ></script>
<script src="/lib/bootstrap/js/bootstrap.min.js" ></script>
<script src="/lib/mdbootstrap/js/mdb.min.js" ></script>
<script src="/js/main.js" ></script>


  <script src="/js/lazyload.js" ></script>



  
    <script src="/lib/tocbot/tocbot.min.js" ></script>
  
  <script src="/js/post.js" ></script>



  <script src="/lib/smooth-scroll/smooth-scroll.min.js" ></script>



  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>


<!-- Plugins -->


  

  

  

  

  




  <script src="/lib/prettify/prettify.min.js" ></script>
  <script>
    $(document).ready(function () {
      $('pre').addClass('prettyprint  linenums');
      prettyPrint();
    })
  </script>



  <script src="/lib/typed/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "Antd标签&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script src="/lib/anchor/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "left",
      visible: "false",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      getSearchFile(path);
      this.onclick = null
    }
  </script>



  <script src="/lib/fancybox/jquery.fancybox.min.js" ></script>
  <script>
    $("#post img:not(.no-zoom img, img[no-zoom])").each(
      function () {
        var element = document.createElement("a");
        $(element).attr("data-fancybox", "images");
        $(element).attr("href", $(this).attr("src"));
        $(this).wrap(element);
      }
    );
  </script>







</body>
</html>
