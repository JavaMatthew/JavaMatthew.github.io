---
title: 字符串截取
date: 2020-11-13 16:09:45
tags: [错误,Java]
categories: [错误,Java]
---
> 出现场景：在mina，redis等传输的过程中，原本的名字中有表情，一个emoji有时候占2个或多个字符，使得字符串截取有问题显示报错，因此要使用java的offsetByCodePoints方法来截取字符。

```java
/**
* 截取出包含emoji表情字符串的前四位
*
* @param source 包含emoji表情的源字符串
* @return 截取前四位后的结果
*/
private String subStrIncludeEmojiFour(String source) {
    String result;
    try {
        result = source.substring(source.offsetByCodePoints(0, 0),
                source.offsetByCodePoints(0, 4));
    } catch (Exception e) {
        result = "";
    }
    return result;
}
```