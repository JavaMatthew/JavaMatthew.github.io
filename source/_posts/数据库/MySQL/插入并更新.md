---
title: 插入并更新
p: 数据库/MySQL/插入并更新
date: 2021-02-21 22:49:51
tags: MySQL
categories: MySQL
---
## INSERT ON DUPLICATE KEY UPDATE

> 如果行作为新记录被插入，则受影响行的值为1；
如果原有的记录被更新，则受影响行的值为2；
如果更新的数据和已有的数据一模一样，则受影响的行数是1。

原因是再插入之前会先查询一次，如果没有就插入，返回1，如果有但是值相同，不用更新则也返回1，如果更新则返回2。
