---
title: 数据类型
p: 数据库/MySQL/数据类型
date: 2020-04-25 22:37:23
tags: MySQL
categories: MySQL
---
## Int类型

{% asset_img int类型.png int类型%}

### 属性

- UNSIGNED/SIGNED
  - 是否有符号
- ZEROFILL
  - 填充0（例如：0001）
  - 显式属性
  - 只不做任何修改
- AUTO_INCREMENT
  - 自增
  - 每张表一个
  - 必须是索引的一部分

### 总结

- 推荐不要使用UNSIGNED
- 范围本质上没有大的改变
- UNSIGNED可能会有一处现象发生
- 自增INT类型逐渐建议使用BIGINT

## 数字类型

• 单精度类型：FLOAT
• 双精度类型：DOUBLE
    单精度类型和双精度类型精度较低，M*G/G不一定等于M
• 高精度类型：DECIMAL

{% asset_img 数值类型.png 数值类型%}
财务系统必须用DECIMAL类型
FLOAT(M,D)/DOUBLE(M,D)/DECIMAL(M,D) 表示显示M位整数，其中D位位于小数点后面

## 字符串类型

{% asset_img 字符串类型.png 字符串类型%}
BLOB => VARBINARY
TEXT => VARCHAR

- 在BLOB和TEXT列上创建索引时，必须制定索引前缀的长度
- VARCHAR和VARBINARY前缀长度是可选的。
- BLOB和TEXT列不能有默认值
- BLOB和TEXT列排序时只使用该列的前max_sort_length个字节

```sql
mysql > select @@global.max_sort_length;
+----------------------------------------+
| @@global.max_sort_length |
+----------------------------------------+
| 1024 |
+----------------------------------------+
1 row in set (0.00 sec)
```

### 字符串类型——字符集

• character set
• a set of symbols and encodings.
• 常见字符集：utf8、utf8mb4、gbk，gb18030

### 字符串类型——字符集的设置

• 配置参数character_set_server
• CREATE DATABASE
• CREATE TABLE

```sql
CREATE {DATABASE | SCHEMA} [IF NOT EXISTS] db_name
[create_specification] ...
create_specification:
[DEFAULT] CHARACTER SET [=] charset_name
| [DEFAULT] COLLATE [=] collation_name

CREATE TABLE t( a CHAR(10))CHARSET=utf8mb4;

CREATE TABLE t (
a VARCHAR(10) CHARSET gbk, 
b VARCHAR (10) CHARSET latin1, 
c VARCHAR (10) ) CHARSET=utf8mb4;
```

### 字符串类型——排序规则

• collation
• set of rules for comparing characters in a character set

{% asset_img 排序规则.png 排序规则%}
ci代表大小写不敏感
{% asset_img 排序规则种类.png 排序规则种类%}
如果要设置为大小写敏感并且区分空格就设置为utf8mb4_bin

### 字符串类型——ENUM & SET

• 字符串类型——集合类型
• ENUM类型最多允许65536个值
• SET类型最多允许64个值
• 通过sql_mode参数可以用于约束检查

```sql
mysql> CREATE TABLE t (
-> user VARCHAR(30),
-> sex ENUM('male','female')
-> )ENGINE=InnoDB;
Query OK, 0 rows affected (0.01 sec)
mysql> SET SQL_MODE='strict_trans_tables';
Query OK, 0 rows affected (0.00 sec)
mysql> INSERT INTO t SELECT 'David','male';
Query OK, 1 row affected (0.00 sec)
Records: 1 Duplicates: 0 Warnings: 0
mysql> INSERT INTO t SELECT 'John','bimale'; 
ERROR 1265 (01000): Data truncated for column 'sex' at row 1
```
