---
title: php语法基础
p: 后端/php/php语法基础
date: 2020-05-28 22:15:09
tags: php
categories: php
---
## PHP语法

> PHP是一种运行在服务器端的脚本语言，可以嵌入到HTML中

ASP标记：<% php代码 %>
短标记： <? php代码 ?> ，以上两种基本启用，如果要使用那么需要在配置文件中开启
脚本标记: < script script script language="php">php代码< / script>
标准标记（常用）：\<?php php代码 ?>

## PHP注释

行注释
//: 后面的所有内容都是注释
\#: 与//一样

块注释
/\* \*/

## PHP语句分隔符

语句分隔符：在PHP照片那个，代码是以行为单位，系统需要通过判断行的结束，该结束通常都是一个符号：分号

### 特殊说明

1. PHP中标记结束符?>有自带语句结束符的效果，最后一行PHP代码可以没有语句结束符";"
2. PHP中起始很多代码的书写并不是嵌入到HTML中，而是单独存在，通常书写习惯中就不建议使用标记结束符?>,PHP会自动从开始到最后全部认为是PHP代码，从而解析。

## 变量

PHP是一种动态网站开发的脚本语言，动态语言特点是交互性，会有数据的传递，而PHP作为中间人，需要进行数据的传递，传递的前提就是PHP能自己存储数据（临时存储）

### 变量命名规则

1. PHP中的所有变量都必须使用“$”
2. 名字由数字、字母、下划线过程，数字不能开头

删除变量unset(变量名)

```php
$var = 2;
unset($var);
```

### 预定义变量

$_GET: 获取所有表单以get方式提交的数据
$_POST: 获取所有表单以post方式提交的数据
$_REQUEST: GET和POST提交的都会保存
$_GLOBALS: PHP中所有的全局变量
$_SERVER:服务器信息
$_SESSION: session会话数据
$_COOKIE: cookie会话数据
$_ENV: 环境信息
$_FILES: 用户上传的文件信息

### 可变变量

> 如果一个变量保存的值刚好是另外一个变量的名字，那么可以直接通过访问一个变量得到另外一个变量的值，在变量前面多加一个$符号

```php
$a = 'b';
$b = 31232;
echo $$a;
```

### 变量传值

#### 值传递

> 将变量保存到额值赋值一份，然后将新的值给另外一个变量保存（两个变量没有关系）

```php
$a = 'b';
$b = $a;
echo $b;
```

#### 引用传递

> 将变量保存的值所在的内存地址，传递给另外的一个变量：两个变量指向同一块内存空间（两个变量是同一个值）

```php
$a = 'b';
$b = &$a;
echo $b;
```

### 数据类型

> 数据类型：data type，在PHP中指的是存储的数据本身的类型，而不是变量的类型。PHP是一种弱类型语言，变量本身没有数据类型。

在PHP中将数据分为3大类8小类

1. 简单数据类型：4小类
   1. 整型：int、integer，系统分配4个字节存储，表示整数类型（有前提）
   2. 浮点型：float、double，系统分配8个字节存储，表示小数或者整数存不下的整数
   3. 字符串型：string，系统根据实际长度分配，表示字符串（引号）
   4. 布尔类型：bool、boolean，表示布尔类型，只有两个值：true、false
2. 符合数据类型
   1. 对象类型：object，存放对象
   2. 数据类型：array，存储多个数据（一次性）
3. 特殊数据类型
   1. 资源类型：resource，存放资源数据（PHP外部数据，如数据库、文件）
   2. 空类型：NULL，只有一个值NULL（不能运算）

#### 整型

整型分为：

1.10进制 `$zhengshu = 1000;`
2.8进制  `$zhengshu = 033145;` 以0开始，后面跟0-7的整数
3.16进制 `$zhengshu = 0x6ff;`  以0x开始，后面跟0-f的，0x的abcdef不区分大小写。

整型（整数）在计算机里面是有最大值和最小值范围的。

#### 布尔

布尔值=false
整数值=0
浮点数=0.0
空字符串
空数组

#### 字符串

在PHP语言中声明字符串有三种方式：

1. 用单引号声明
2. 用双引号声明
3. 用字界符声明（需要输入非常大段的字符串时使用）
    1).在变量后面的等号写三个小于号（<<<）。
    2).然后在<<<后面写上字符（建议英文大写字符）。如下例中的：ABC
    3).然后换行写上任意想写的字符
    4).写完后，顶行。在行最开始处，再写上<<<后面的字符和分号。如下例中的：ABC;

```php
$zhifu = '曾经有操蛋的爱情摆在我面前，我珍惜了。当我得到的时候才感到后悔莫及。如果非要在这段爱情前面加上一段三个字，我愿意说三个字：滚犊子';
$str = "如果非要在滚犊子前面加上一个时间的话我愿意是马上。";
$dingjie = <<<ABC
  如果
       非要在这个滚犊子
   前
       面<br />
      加上一段
   <i>距离的话</i>
   我想说：<h1>思想有多远，你就跟我滚多远</h1>
ABC;
```

##### 双引号和单引号有什么区别

1. 双引号解析变量，但是单引号不解析变量。
2. 在双引号里面插入变量，变量后面如果有英文或中文字符，它会把这个字符和变量拼接起来，视为一整个变量。一定要在变量后面接上特殊字符，例如空格等分开。
3. 如果在双引号里面插变量的时候，后面不想有空格，可以拿大括号将变量包起来。
4. 双引号解析转义字符，单引号不解析转义字符。但，单引号能解析\' 和\
5. 单引号效率高于双引号，尽可能使用单引号
6. 双号和单引号可以互插！！！双引号当中插入单引号，单引号当中插入变量，这个变量会被解析。
7. 神奇的字符串拼接胶水——（.）点，用来拼接字符串。
8. 我们将定界符声明字符串视为双引号一样的功能来看待。

#### 浮点型

小数类型以及超过整形所能存储范围的整数（不保证精度），精度范围大概在15个有效数字左右
声明方式分为两种：普通声明，科学声明

```php
$f = 1.23;
$f = 1.23e10 // 科学计数法，其中e表示底10
```

#### NULL类型

主要有以下三空情况会产生空（null）类型：

1.通过变量赋值明确指定为变量的值为NULL
2.一个变量没有给任何值
3.使用函数unset()将变量销毁掉

### 类型转换

类型转换：在很多的条件下，需要指定的数据类型，需要外部数据（当前PHP取得的数据），转换成目标数据类型

在PHP中有两个类型转换方式：

1. 自动转换：系统根据需求自己判定，自己转换（用的比较多，效率偏低）
2. 强制（手动）转换：认为根据需要的目标类型转换

### 变量作用域

函数定义时后括号里面接的变量是形式上的参数（形参），与函数体外的变量没有任何关系。仅仅是在函数内部执行

函数内声明的变量也与函数外的变量没关系。

但是，我们实际的处理情况中会遇到这样的一个情况：

我想在函数体内定义的变量在函数体外用

我想把函数体外的变量拿到函数体内来使用

这个时候我们就需要用到超全局变量。

### 静态变量

> static，是在函数内部定义的变量，使用static关键字修饰，用来实现跨函数共享数据的变量：函数运行结束所有局部变量都会清空，如果重新运行一下函数，所有的局部变量优惠重新初始化。声明一个静态变量，第二次调用函数的时候，静态变量不会再初始化变量，会在原值的基础上读取执行。

```php
<?php
function demo(){
   $a = 0;
   echo $a;
   $a++;
}
function test(){
   static $a = 0;
   echo $a;
   $a++;
}
demo();
demo();
demo();
demo();
demo();
demo();
demo();
demo();
demo();
demo();
for($i = 0 ;$i < 10 ; $i++){
   test();
}
?>

结果为
00000000000123456789
```

### 常量

常量在代码中的定义、书写方式：

1. `define(常量名，常量值)`
2. const 常量名 = 值;

#### 命名规范

1. 常量不需要使用$符号，一旦使用系统就会认为是变量；
2. 常量的名字组成由数字、字母和下划线组成，不能以数字开头；
3. 常量的名字通常是以大写字母为主（与变量以示区别）；
4. 常量的命名规则比变量松散，可以使用特殊字符，但只能用define定义

```php
define('-_-','smile');
特殊的常量只能通过constant函数来声明
print constant('-_-');
```

#### 系统内置的常量

|常量名|说明|
|--|--|
|__LINE__|当前所在的行|
|__FILE__|当前文件在服务器的路径|
|__FUNCTIOIN__|当前函数名|
|__CLASS__|当前类名|
|__METHOD__|当前成员方法名|
|__PHP_OS__|PHP运行的操作系统|
|__PHP_VERSION__|当前PHP的版本|
|__TRAITTrait__ 的名字,php5.|4新加|
|__DIR__|文件所在的目录|
|__NAMESPACE__|当前命名空间的名称（区分大小写）|

## 函数

### 自定义函数

```php
function 函数名([参数名1[=值1], 参数名2[=值2], 参数名n[=值n]]){
       函数中的功能体
    [return 返回值]
}
```

1. 函数以function开始
2. function后面接空格，空格后接函数名
3. 函数名与变量命名规则基本一样，但是不同的是：函数名不区分大小写
4. 所谓参数其实就是变量
5. 函数名后接括号，括号内跟参数，参数全都有[]（中括号）括起来了，代表参数可填可不填
6. 如果有参数的话，参数后可以接（＝）等号，等号接默认值。参数值也是用[]（中括号）括起来的，代表选填
7. 函数后的参数变量，主要功能是把函数体外的变量值，传入函数体内来使用，函数体的变量和函数体外的变量通常是两个不         同的变量。
8. 函数中的具体功能（功能体）用大括号括起来，代表这是一个函数的功能区间
9. 函数可以有返回值也可以没有返回值，用[]（中括号）括起来的，代表选填。
10. return后接空格，空格后接返回值，若有return,return后的代码均不执行。
11. 函数的执行没有顺序关系，可以在定义处之前的位置调用
12. 函数不能被定义两次，即函数不能被重载

### 变量函数

可变函数，我们也会称呼为变量函数。

```php
<?php
function demo(){
    echo '天王盖地虎';
}
function test(){
    echo '小鸡炖蘑菇';
}
$fu = 'demo';
//把$fu变为了demo,把demo后加上了一个括号，就执行函数了
$fu();
//把$fu的值改为test字符串再试试？
结果：
天王盖地虎
?>
```

### 内部函数

注意事项：

1. 内部函数名，不能是已存在的函数名
2. 假设在函数a里面定义了一个内部函数，不能定用两次函数a。

```php
<?php
function foo(){
 echo '我是函数foo哟，调一下我才会执行定义函数bar的过程<br />';
 function bar(){
      echo '在foo函数内部有个函数叫bar函数<br />';
 }
}

//现在还不能调用bar()函数，因为它还不存在
bar();
foo();
//现在可以调用bar()函数了，因为foo()函数的执行使得bar()函数变为已定义的函数
bar();
//再调一次foo()看看是不是会报错？
foo();
?>
1.foo()调用两次会报错
2.如果不调foo()函数无法执行bar函数，因为bar是在foo的内部
```

### 系统内置函数

#### copy()

> bool copy ( string $source , string $dest [, resource $context ] )

这个函数的功能为： 拷备一个文件

返回值为为： bool型值，就是成功返回true，失败返回false

参数为： 两个字符串的值，一个是copy的源文件，一个为目标文件。第三个参数可选的，不常用，我们不管它。

```php
<?php

if(copy('abc.txt','bcd.txt')){
   echo '复制成功';
}else{
   echo '复制失败';
}
?>
```

#### Array_unshift()

> int array_unshift ( array &$array , mixed $value1 [, mixed $... ] )

功能： 操作一个数组，向数组中之前插入其他类型的参数。

返回值： int 类型，可能就是插入成功最后的个数

参数： 第一个参数为&符，也就是在操作的过程中，改变了第一个参数的值。引用传参。也就是操作这个数组，向这个数组中传入参数。会直接改变这个数组的值。

第二个参数为mixed，因为数组可以存入多个不同的类型.mixed是指混合的意思。因此，mixed是指可传入任意类型

第三个数数加了中括号，我们所有遇到中括号的。都是指后面的参数可传，也可以不传。

第四，最后还看到了三个...(省略号)。代表可以传入任意多个参数。

```php
<?php

if(copy('abc.txt','bcd.txt')){
   echo '复制成功';
}else{
   echo '复制失败';
}
?>
结果为
Array ( [0] => 杨幂 [1] => 姚晨 [2] => 凤姐 [3] => 芙蓉 )
```

#### array_walk

> bool array_walk ( array &$array , callable $callback [, mixed $userdata = NULL ] )

功能：传入一个回调函数，将数组的原来的组操作，并且发生变化。

返回值：bool 值 也就是意味着，提示成功或者失败

参数：
第一个参数是要操作的数组。

第二个参数是callback 代表着可以传入函数或者匿名函数。

### 时期时间信息函数

#### 时区

这个概念，之前大家听说过很多。我们来啰嗦两句，我们现实生活中使用的实区，在电脑里面也是一样有规定的。
1884年在华盛顿召开国际经度会议时，为了克服时间上的混乱，规定将全球划分为24个时区。
在中国采用首都北京所在地东八区的时间为全国统一使用时间。

设置时区
   1). date_default_timezone_get()
   2).date_default_timezone_set()

#### 世界时

不光是天文学家使用格林尼治时间（英文简写:GMT），就是在新闻报刊上也经常出现这个名词。我们知道各地都有各地的地方时间。如果对国际上某一重大事情，用地方时间来记录，就会感到复杂不便．而且将来日子一长容易搞错。因此，天文学家就提出一个大家都能接受且又方便的记录方法，那就是以格林尼治（英国某地区）的地方时间为标准。

#### unix时间戳

电脑本身不认识时间，我们在电脑里面设置一个时间方便运算。于是我们规定了一种计算方式，unix时间戳。
从Unix纪元（1970 年 1月1日零时）开始到一个时间经过的秒数。

time()获取当前的unix时间戳

string date ( string $forrnat [, int $tirnestamp] )
在参数列表中:

$timestamp是一个时间戳，函数将这个时间戳按$format规定的格式输出。

如果$timestamp没有输入值，则默认为当前的时间。

$format是一个时间输出格式的字符串，需要使用规定的字符构造输出格式。

#### date函数的格式参数表

|字符|说明|返回值|
|--|--|
|d|月份中的第几天，有前导零的2 位数字|01 到31|
|D|英文星期几，3个字母|Mon到Sun|
|j|月份中的第几天，没有前导零|1 到31|
|l|   (字母)英文星期几|Sunday到 Saturday|
|N|1格式数字表示的星期|1（表示星期一）到7（表示星期天)|
|S|每月天数后面的英文后缀，2个字符|st，nd，rd或者th。可以和jg一起用|
|w|星期中的第几天，数字表示|0（表示星期天）到 6（表示星期六）|
|z|一年中的第几天|0到366|
|W|年份中的第几周，每周从星期一开始|42（当年的第42周）|
|F|月份，完整的文本格式|January 到 December|
|m|数字表示月份，有前导零|01 到 12|
|M|3个字母缩写表示的月份|Jan 到Dec|
|n|数字表示月份，没有前导零|1 到 12|
|t|给定月份所应有的天数|28 到 31|
|L|是否为闰年|如果是闰年为1，否则为o|
|o|格式年份数字|例如2007|
|Y|4 位数字完整表示年份|例如1999或2008|
|y|2 位数字表示的年份|例如99或08|
|a|小写的上午和下午值|am或pm|
|A|大写的上午和下午值|AM或PM|
|g|小时，12小时格式，没有前导零|1到12|
|G|小时，24小时格式，没有前导零|0 到 23|
|i|有前导零的分钟数|00 到 59|
|s|秒数，有前导零|00到59|
|e|时区标识||
|U|从Unix纪元开始至今的秒数|长整型数字|

```php
<?php

//定义一下时区常量，以后你可以放到配置文件里
define('TIME_ZONE','Asia/shanghai');

//执行函数
date_default_timezone_set(TIME_ZONE);

echo date('Y-m-d H:i:s');

?>
```

#### 日期验证函数

bool checkdate ( int $month , int $day , int $year )
如果是有效的时间就返回真，如果不是有效的时间就返回假。

```php
<?php
var_dump(checkdate(12, 31, 2018));
var_dump(checkdate(2, 29, 2011));
?>
bool(true) bool(false)
```

### 包含函数

|函数|包含失败|特点|
|--|--|--|--|
|Inlcude|返回一条警告|文件继续向下执行。通常用于动态包含|
|Require|一个致命的错|代码就不会继续向下执行。通常包含极为重要的文件，整个代码甭想执行|
|Include_once|返回一条警告|除了原有include的功能以外，它还会做once检测，如果文件曾经已经被被包含过，不再包含|
|Require_once|一个致命的错|除了原的功能一外，会做一次once检测，防止文件反复被包含|

注意：

1. 少用_once带once，因为它会消耗更多的资源去做检测的工作。
2. Include文件只需要编译一次，因为每次包含include都会再执行一次对应的代码，如何减少include再次执行时，需要重新解析的过程。

## 运算符

### 连接运算符

. 将两个字符串连接到一起
.= 复合运算，将左边的内容与右边的内容连接起来，然后重新赋值给左边变量
`A.=b   => A = A . b`

### 错误抑制符

`@()`()内填写语句，如果报错可以抑制不显示，直接继续执行，一般用在生产环境
